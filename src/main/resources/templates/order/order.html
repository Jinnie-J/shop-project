<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div style="width:70%; margin-left:auto; margin-right:auto;">

    <h1>주문서작성/결제</h1>

    <h3>주문리스트</h3>

    <th:block th:each="dto : ${sizeDTO}">
        <!--주문상품내역-->
        <div style="display:flex">

            <!--상품이미지-->
            <div style="width:150px; height:150px">
                <img width="100%" height="100%" th:src="${imgUrl}">
            </div>
            <!--상품이름-->
            <div style="width:50%">
                [[${product.brand}]] <br>
                [[${product.name}]] <br>

                <p class="pd_Info" th:data-size="${dto.size}" th:data-amount="${dto.amount}">[[${dto.size}]] / [[${dto.amount}]] 개</p>
            </div>
            <!--가격-->
            <div style="width:15%">
                <p th:text="${#numbers.formatInteger(product.price*dto.amount, 3, 'COMMA')} + 원"></p>
            </div>
            <!--배송-->
            <div style="width:15%">무료배송</div>
        </div>

    </th:block>

    <p id="totalPrice"></p>

</div>

<!--보내야 될 값 : 수량, 상품명, 총액-->
<form action="/kakaoPay" method="post">
    <input type="hidden" name="" value="">
    <input type="hidden" name="" value="">
    <input type="hidden" name="" value="">
    <button>카카오페이로</button>
</form>
<script>
    $(document).ready(function(){
          let pdList = document.getElementsByClassName('pd_Info');

          console.log(pdList[0].dataset['amount']);

            let totalAmount = 0;
          for(let v of pdList){ totalAmount += v.dataset['amount']*1};

          $("#totalPrice").text(`총 수량 ${totalAmount}`);
    })
</script>
</html>